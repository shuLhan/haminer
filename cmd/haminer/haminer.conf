## SPDX-FileCopyrightText: 2018 M. Shulhan <ms@kilabit.info>
## SPDX-License-Identifier: GPL-3.0-or-later

[haminer]
##
## Set default listen address in UDP.
##
## Format
##
##    listen = ADDR [ ":" PORT ]
##
## Default: 127.0.0.1:5140
##
## Examples
##
##    listen=127.0.0.1:5140
##    listen=192.168.56.1:5140
##

#listen=

##
## List of HAProxy backend to be accepted and forwarded to Influxdb.
## Each accept_backend can be listed multiple times.
##
## Format
##
##    accept_backend = <string>
##
## Default: "", no filter (all backend are accepted).
##
## Examples
##
##    accept_backend=api_01
##    accept_backend=api_02
##

#accept_backend=

##
## Parse HTTP request header in log file generated by "capture request header
## ..." option.
##
## Format
##
##    capture_request_header = <string>
##
## The name should contains only alphabets and underscore.
##
## Default: "" (empty)
##
## Examples
##
##    capture_request_header = host
##    capture_request_header = referrer
##

#capture_request_header=

##
## Duration, in seconds, when the logs will be forwarded.
##
## Format
##
##    forward_interval = DIGIT "s"
##
## Default: "15s"
##
#forward_interval = 15s

##
## Pre-process tag by replacing its value using regular expression.
## Each pre-process rules is run from top to bottom, which means if we have
## two or more rules with the same key, the output of first pre-process will
## be used as an input for the second rule.
##
## Currently only accept "http_url" as the key.
##
## Format
##
##    TAG-NAME "=" regex "=>" replacement
##
## Examples
##
##    http_url = /uuid/\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12} => /uuid/-
##    http_url = /id/[0-9]+ => /id/-
##
## This will replace "/id/1000" with "/id/-" and/or
## "/uuid/e7282bca-73b3-48fc-9793-6446ea6ebff3" into "/uuid/-"
##
## If the order of key is wrong, you may get the unexpected output.
## For example,
##
##    http_url = /id/[0-9]+ => /id/-
##    http_url = /uuid/\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12} => /uuid/-
##
## Given URL with UUID that contains number at beginning,
##
##    /uuid/9845a0b4-f4c3-4600-af13-45b5b0e61630
##
## will result in "/uuid/-a0b4-f4c3-4600-af13-45b5b0e61630", not "/uuid/-" as
## you would expected.
##
## So, please be careful on how you define the rules.
##
[preprocess "tag"]
#http_url =

[forwarder "influxd"]

## The version of influxd to forward the log.
## This option affect on which HTTP API will be used later.
## Valid values are "v1" or "v2" (default).
#version = v2

## The address of influxd.
## If its empty, the logs will not forwarded.
##
## Format
##
##    http://<hostname|IP-address>:<port>
##
#url =

## The destination organization for writes.
## InfluxDB writes all points in the batch to this organization.
## For v2, this field is required.
#org =

## The bucket name where logs will be written.
## For v1, this is equal to database name ("db" field in query parameter).
## This field is optional, default to "haproxy"
#bucket = haproxy

## Authentication for v1.
#user =
#password =

## Authorization for v2.
#token =

## The questdb forwarder define configuration to forward the log to questdb
## instance.
## The log is forwarded using Influxb Line Protocol (ILP) [1]
##
## [1]: https://questdb.io/docs/reference/api/ilp/overview

[forwarder "postgresql"]

## The Data Source Name of Postgresql server in the following format,
##
##	"postgres://$user:$pass@$host/$database?sslmode=
##
## An empty url means the forwarder is disabled.
url =

[forwarder "questdb"]

## The URL of questdb server in the following format,
##
##	$scheme "://" $ip_address [":" $port]
##
## The $scheme can be "udp" (default) or "tcp".
## The $ip_address is required, define the address where questdb running.
## The $port number is optional default to 9009.
##
## An empty url means the forwarder is disabled.
url =
